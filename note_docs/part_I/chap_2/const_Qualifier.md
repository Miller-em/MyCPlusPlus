# const 限定符

为什么要用**const限定符**？有时候我们希望定义一种变量，它的值不能被改变。例如用一个变量表示缓冲区的大小。这样做的好处是，如果我们觉得这样大小的缓冲区的大小不再合适时，很容易进行修改。另一方便，也应该警惕防止程序不小心改变了这个值，为了让满足这一要求，可以用关键字**const**对变量的类型加以限定。

## const的引用

我们可以把引用绑定在const对象上面，就像绑定在其他对象上一样，我们称之为对常量的引用。与普通引用不同的是，对常量的引用不能够被用作修改他绑定的对象：

```c++
const int ci =1024;
const int &r1 = ci;	//正确；引用及其对应的对象多少常量
r1 = 42;			//错误；r1是对常量的引用
int &r2 = ci;		//错误；试图让一个非常量引用指向一个常量对象
```

## 指针和const

指向常量的指针不能用于改变其所指对象的值，想要存放常量对象的地址，智能使用指向常量的指针：

```c++
const double pi = 3.14;
double *ptr = &pi;	//错误：ptr是一个普通的指针
const double *cptr = &pi;
*cptr = 42;			//错误：不能给*cptr赋值
```

### const 指针

**常量指针必须初始化！**，而且一旦初始化完成，则它的值（也就是存放在指针中的地址）就不能够改变了。把*放在`const`关键字之前用以说明指针是一个常量。

```c++
int errNumb = 0;
int *const curErr = &errNumb;	//curErr将一直指向errNumb
const double pi = 3.14159;
const double *const pip = &pi;	//pip是一个指向常量对象的常量指针
```

要搞明白这些声明的含义最有效地办法就是从右往左阅读。此例中，离`curRrr`最近的符号是`const`，意味着curErr本身就是一个常量对象，接着是`*`说明是一个常量指针

## 顶层const

**顶层指针**表示指针本身就是一个常量；**底层指针**表示指针指向的对象是一个常量。

```c++
int i = 0；
int *const p1 = &i;	//不能改变p1的值，这是一个顶层
const int *p2 = &ci; //能改变p2的值，这是一个底层const
const int ci = 42;	//顶层const
```

